databaseChangeLog:
  - changeSet:
      id: 1711448991123-1
      author: Sergey
      changes:
        - createTable:
            tableName: audit
            remarks: "аудит"
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  remarks: "технический идентификатор"
                  constraints:
                    primaryKey: true
                    primaryKeyName: audit_pkey
                    nullable: false
              - column:
                  name: entity_type
                  type: VARCHAR(40)
                  remarks: "тип сущности"
                  constraints:
                    nullable: false
              - column:
                  name: operation_type
                  type: VARCHAR(255)
                  remarks: "тип операции"
                  constraints:
                    nullable: false
              - column:
                  name: created_by
                  type: VARCHAR(255)
                  remarks: "кто создал"
                  constraints:
                    nullable: false
              - column:
                  name: modified_by
                  type: VARCHAR(255)
                  remarks: "кто изменил"
              - column:
                  name: created_at
                  type: TIMESTAMP WITH TIME ZONE
                  remarks: "когда создан"
                  constraints:
                    nullable: false
              - column:
                  name: modified_at
                  type: TIMESTAMP WITH TIME ZONE
                  remarks: "когда изменен"
              - column:
                  name: new_entity_json
                  type: TEXT
                  remarks: "json, заполняется при изменении"
              - column:
                  name: entity_json
                  type: TEXT
                  remarks: "json, заполняется при изменении и при сохранении"
                  constraints:
                    nullable: false

  - changeSet:
      id: 1711448991123-2
      author: Sergey
      changes:
        - createTable:
            tableName: suspicious_account_transfers
            remarks: "подозрительные переводы по номеру счёта"
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  remarks: "технический идентификатор"
                  constraints:
                    primaryKey: true
                    primaryKeyName: suspicious_account_transfers_pkey
                    nullable: false
              - column:
                  name: account_transfer_id
                  type: BIGINT
                  remarks: "технический идентификатор на перевод по номеру счёта"
                  constraints:
                    nullable: false
              - column:
                  name: is_blocked
                  type: BOOLEAN
                  remarks: "заблокировано ли"
                  constraints:
                    nullable: false
              - column:
                  name: is_suspicious
                  type: BOOLEAN
                  remarks: "подозрительный ли перевод"
                  constraints:
                    nullable: false
              - column:
                  name: blocked_reason
                  type: TEXT
                  remarks: "причина блокировки"
              - column:
                  name: suspicious_reason
                  type: TEXT
                  remarks: "причина, почему перевод попал в антифрод"
                  constraints:
                    nullable: false

  - changeSet:
      id: 1711448991123-3
      author: Sergey
      changes:
        - createTable:
            tableName: suspicious_card_transfer
            remarks: "подозрительные переводы по номеру карты"
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  remarks: "технический идентификатор"
                  constraints:
                    primaryKey: true
                    primaryKeyName: suspicious_card_transfer_pkey
                    nullable: false
              - column:
                  name: card_transfer_id
                  type: BIGINT
                  remarks: "технический идентификатор на перевод по номеру телефона"
                  constraints:
                    nullable: false
              - column:
                  name: is_blocked
                  type: BOOLEAN
                  remarks: "заблокировано ли"
                  constraints:
                    nullable: false
              - column:
                  name: is_suspicious
                  type: BOOLEAN
                  remarks: "подозрительный ли перевод"
                  constraints:
                    nullable: false
              - column:
                  name: blocked_reason
                  type: TEXT
                  remarks: "причина блокировки"
              - column:
                  name: suspicious_reason
                  type: TEXT
                  remarks: "причина, почему перевод попал в антифрод"
                  constraints:
                    nullable: false

  - changeSet:
      id: 1711448991123-4
      author: Sergey
      changes:
        - createTable:
            tableName: suspicious_phone_transfers
            remarks: "подозрительные переводы по номеру телефона"
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  remarks: "технический идентификатор"
                  constraints:
                    primaryKey: true
                    primaryKeyName: suspicious_phone_transfers_pkey
                    nullable: false
              - column:
                  name: phone_transfer_id
                  type: BIGINT
                  remarks: "технический идентификатор на перевод по номеру телефона"
                  constraints:
                    nullable: false
              - column:
                  name: is_blocked
                  type: BOOLEAN
                  remarks: "заблокировано ли"
                  constraints:
                    nullable: false
              - column:
                  name: is_suspicious
                  type: BOOLEAN
                  remarks: "подозрительный ли перевод"
                  constraints:
                    nullable: false
              - column:
                  name: blocked_reason
                  type: TEXT
                  remarks: "причина блокировки"
              - column:
                  name: suspicious_reason
                  type: TEXT
                  remarks: "причина, почему перевод попал в антифрод"
                  constraints:
                    nullable: false

  - changeSet:
      id: 1711448991123-5
      author: Sergey
      changes:
        - addUniqueConstraint:
            tableName: suspicious_account_transfers
            columnNames: account_transfer_id
            constraintName: suspicious_account_transfers_id_key

  - changeSet:
      id: 1711448991123-6
      author: Sergey
      changes:
        - addUniqueConstraint:
            tableName: suspicious_card_transfer
            columnNames: card_transfer_id
            constraintName: suspicious_card_transfer_id_key

  - changeSet:
      id: 1711448991123-7
      author: Sergey
      changes:
        - addUniqueConstraint:
            tableName: suspicious_phone_transfers
            columnNames: phone_transfer_id
            constraintName: suspicious_phone_transfers_id_key
