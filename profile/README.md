# Как пользоваться сервисом Profile

Профиль это многоуровневая сущность, внутри неё находятся сущности паспорта и регистрации.
При получении профиля, в ответе передаются все сущности целиком.
При изменении профиля, необходимо передавать весь dto профиля целиком. 
Решение "всё одной сущностью" так себе, но более гранулярное управление я буду делать вечность....

### Топики Kafka
Все доступные топики можно посмотреть в `application-local.yaml` под `app.kafka.topic`.
Спринг так же попытается автоматически добавить все перечисленные в `application-local.yaml` топики в кафку.
Чтобы это отключить, уберите `kafka-auto-topics` из активных профилией спринга.

### Создание нового профиля (и привязка к аккаунту)
Новый профиль можно создать через топик `profile.account.create`. 
В параметрах надо будет предоставить `AccountDetailsDto`, где будет заполнено только поле `account_id`

### Изменение профиля и других сущностей
Изменение любой из сущностей профиля через кафку происходят только через изменение всего объекта профиля целиком.

### Тестирование
Для удобства тестирования я оставил REST контроллеры, через которые можно управлять отдельынми сущностям.
Чтобы контроллеры заработали, в пропертах спринга нужно добавить активный профиль `test`

Так же я оставил в спринге актинвый профиль `mock-data`, поэтому в базе уже будут созданные профили, привязанные к аккаунту с id 1 и 2